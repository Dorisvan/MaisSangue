{% extends "index.html" %}
{% block tudo %}

<br>
<br>
<br>
<br>
<br>



<div class="div_externa_form_saude container">
    <div class="section-title container">
      <br>
      <h2>Inserir nova doença</h2>
      {% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}
          <ul id="messages" class="list-unstyled">
          {% for category, message in messages %}
            <li class="alert alert-{{ category }}">{{ message }}</li>
          {% endfor %}
          </ul>
        {% endif %}
      {% endwith %}
    </div>

    <form action="{{ url_for('historico_doencas') }}" method="POST" >
      <label for="doenca_id" style="text-align:center">Selecione seu caso:</label>
      <select name="doenca_id" id="doenca_id" class="form-select">
        <option value="1">HIV</option>
        <option value="2">Hepatite pós 10 anos de idade</option>
        <option value="3">Malária</option>
        <option value="4">Chagas</option>
        <option value="5">Enxerto de duramater</option>
        <option value="6">Câncer gerais ou Leucemia</option>
        <option value="7">Problemas de pulmão, coração, rins ou fígado</option>
        <option value="8">Diabético com complicações vasculares ou em uso de insulina</option>
        <option value="9">Tuberculose extra-pulmonar</option>
        <option value="10">Elefantíase</option>
        <option value="11">Hanseníase</option>
        <option value="12">Calazar (leishmaniose visceral)</option>
        <option value="13">Leishmaniose tegumentar ou cutânea</option>
        <option value="14">Esquistossomose hepatoesplênica</option>
        <option value="15">Doenças que gerem inimputabilidade jurídica</option>
        <option value="16">Brucelose</option>
        <option value="16">Transplante de órgãos ou de medula</option>
        <option value="18">Mal de Parkinson</option>
      </select>
      <div class="validate"></div>

{% if usuario_nivel == 1 %}

  <div class="row">
    <div class="col-md-4 form-group mt-3 container">
      <label for="usuario_codigo"></label>
      <input type="text" class="form-control" name="usuario_codigo" id="usuario_codigo" placeholder="Código do usuário">
      <div class="validate"></div>
    </div>
  </div>

{% endif %}

    <br>

      <div class="text-center"><button class="botao-cadastro" type="submit">Cadastrar</button></div>
    </form>
</div>

<br>
<br>


{% if usuario_nivel == 1 %}
  <div class="container">

    <div class="section-title container">
      <h2>Histórico de usuários</h2>
    </div>

    <div class="row div_externa">
      <div class="tabela_interna">
        <table class="table">
          <thead>
            <th style="color: #e93138">Código do usuário</th>
            <th style="color: #e93138">Nome</th>
            <th style="color: #e93138">Código da doença</th>
            <th style="color: #e93138">Doença</th>
          </thead>
          <tbody>
          {% if historico %}
            {% for h in historico %}
              <tr>
                <td>{{ h[0] }}</td>
                <td>{{ h[1] }}</td>
                <td>{{ h[2] }}</td>
                <td>{{ h[3] }}</td>
                <td>{{ h[4] }}</td>
                <td></td>
              </tr>
            {% endfor %}
          {% else %}
            <p>Nenhum item foi encontrado</p>
          {% endif %}
          </tbody>
        </table>
      </div>
    </div>
  </div>

{% else %}

  <div class="container">

    <div class="section-title container">
      <h2>Meu histórico de doenças</h2>
    </div>

    <div class="row div_externa">
      <div class="tabela_interna">
        <table class="table">
          <thead>
            <th style="color: #e93138">Código do usuário</th>
            <th style="color: #e93138">Nome</th>
            <th style="color: #e93138">Código da doença</th>
            <th style="color: #e93138">Doença</th>
          </thead>
          <tbody>
          {% if historico %}
            {% for h in historico %}
              <tr>
                <td>{{ h[0] }}</td>
                <td>{{ h[1] }}</td>
                <td>{{ h[2] }}</td>
                <td>{{ h[3] }}</td>
                <td>{{ h[4] }}</td>
                <td></td>
              </tr>
            {% endfor %}
          {% else %}
            <p>Nenhum item foi encontrado</p>
          {% endif %}
          </tbody>
        </table>
      </div>
    </div>
  </div>

{% endif %}

{% endblock tudo %}